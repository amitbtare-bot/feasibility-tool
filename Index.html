<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Small-Scale Chemical Feasibility Platform</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{font-family:Segoe UI;background:#1f2a44;color:#fff;margin:0}
header{text-align:center;padding:20px}
main{max-width:1200px;margin:auto;background:#f4f6f8;color:#222;
padding:30px;border-radius:14px}
label{font-weight:600;margin-top:10px;display:block}
select,input,button{width:100%;padding:8px;margin-top:6px}
button{background:#263238;color:#fff;border:none;margin-top:15px;cursor:pointer}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
gap:15px;margin-top:20px}
.card{background:#263238;color:#fff;padding:15px;border-radius:10px;text-align:center}
.verdict{padding:15px;border-radius:10px;font-size:18px;margin-top:20px}
.good{background:#2e7d32}
.warn{background:#ef6c00}
.bad{background:#c62828}
table{width:100%;border-collapse:collapse;margin-top:15px}
th,td{border:1px solid #bbb;padding:6px;text-align:center;font-size:14px}
canvas{margin-top:25px}
footer{text-align:center;padding:15px;opacity:.8}
</style>
</head>

<body>

<header>
<h1>Small-Scale Chemical Feasibility Tool</h1>
<p>Scale-first feasibility • Concept / Pre-DPR</p>
</header>

<main>

<label>Select Chemical</label>
<select id="chemical"></select>

<label>Comfortable Capacity (TPA)</label>
<input type="number" id="scale" value="2500">

<button onclick="evaluate()">Evaluate Feasibility</button>

<div class="grid">
  <div class="card"><h3>CAPEX Range</h3><div id="capex"></div></div>
  <div class="card"><h3>OPEX (₹/t)</h3><div id="opex"></div></div>
  <div class="card"><h3>EBITDA %</h3><div id="ebitda"></div></div>
  <div class="card"><h3>Ideal Scale</h3><div id="ideal"></div></div>
</div>

<div id="verdictBox" class="verdict"></div>

<h2>Utilities & Manpower</h2>
<table>
<tr><th>Parameter</th><th>Value</th></tr>
<tr><td>Steam (t/y)</td><td id="steam"></td></tr>
<tr><td>Power (kWh/y)</td><td id="power"></td></tr>
<tr><td>Manpower (Nos)</td><td id="manpower"></td></tr>
</table>

<h2>Scale Sensitivity (EBITDA)</h2>
<canvas id="chart"></canvas>

</main>

<footer>
Indicative only • Not a substitute for detailed engineering
</footer>

<script>
/* ================= CHEMICAL DATABASE ================= */
const chemicals = {
  "Ethyl Acetate":      {min:2500, ideal:[3000,6000], steam:1.4, power:100, capex:22, opex:72000, price:90000},
  "Butyl Acetate":      {min:2000, ideal:[3000,5000], steam:1.5, power:105, capex:24, opex:76000, price:98000},
  "Iso-Propyl Acetate": {min:1500, ideal:[2000,4000], steam:1.1, power:90,  capex:18, opex:68000, price:98000},
  "Amyl Acetate":       {min:1000, ideal:[1500,3000], steam:1.2, power:95,  capex:16, opex:70000, price:125000},
  "Alkyd Resin":        {min:2000, ideal:[2500,5000], steam:0.9, power:80,  capex:20, opex:65000, price:95000},
  "Phenolic Resin":    {min:3000, ideal:[4000,7000], steam:1.0, power:85,  capex:26, opex:72000, price:100000},
  "Benzyl Alcohol":    {min:800,  ideal:[1200,2500], steam:0.8, power:70,  capex:14, opex:78000, price:140000},
  "IPA (Isopropanol)": {min:4000, ideal:[6000,10000],steam:1.3,power:110, capex:30, opex:70000, price:85000},
  "Ethyl Lactate":     {min:1000, ideal:[1500,3000], steam:1.1, power:95,  capex:17, opex:82000, price:135000},
  "Non-ionic Surfactant":{min:1200,ideal:[2000,4000],steam:0.9,power:75, capex:19, opex:88000, price:150000}
};

/* Populate dropdown */
const sel=document.getElementById("chemical");
Object.keys(chemicals).forEach(c=>{
  const o=document.createElement("option");
  o.textContent=c;
  sel.appendChild(o);
});

let chart;

/* ================= CORE EVALUATION ================= */
function evaluate(){
  const name=sel.value;
  const scale=+document.getElementById("scale").value;
  const c=chemicals[name];

  const steam=c.steam*scale;
  const power=c.power*scale;
  const manpower=scale<3000?20:scale<6000?28:35;

  const capLow=(c.capex*0.85).toFixed(1);
  const capHigh=(c.capex*1.15).toFixed(1);

  const opex=(c.opex+(scale<c.ideal[0]?6000:0)).toFixed(0);
  const ebitda=((c.price-opex)/c.price*100).toFixed(1);

  capex.innerText=`₹${capLow}–${capHigh} Cr`;
  opexEl.innerText=`₹${opex}`;
  ebitdaEl.innerText=`${ebitda} %`;
  ideal.innerText=`${c.ideal[0]}–${c.ideal[1]} TPA`;

  steamEl.innerText=Math.round(steam);
  powerEl.innerText=Math.round(power);
  manpowerEl.innerText=manpower;

  let verdict="Commercially Viable", cls="good";
  if(scale<c.min || ebitda<10){ verdict="Not Recommended"; cls="bad";}
  else if(scale<c.ideal[0] || ebitda<15){ verdict="Marginal – Scale Sensitive"; cls="warn";}

  verdictBox.className="verdict "+cls;
  verdictBox.innerText=verdict;

  drawChart(c);
}

function drawChart(c){
  const scales=[500,1000,2000,3000,5000,8000];
  const data=scales.map(s=>{
    const op=c.opex+(s<c.ideal[0]?6000:0);
    return ((c.price-op)/c.price*100).toFixed(1);
  });

  if(chart) chart.destroy();
  chart=new Chart(document.getElementById("chart"),{
    type:"line",
    data:{labels:scales,datasets:[{label:"EBITDA %",data:data,borderWidth:3}]}
  });
}

const capex=document.getElementById("capex");
const opexEl=document.getElementById("opex");
const ebitdaEl=document.getElementById("ebitda");
const ideal=document.getElementById("ideal");
const steamEl=document.getElementById("steam");
const powerEl=document.getElementById("power");
const manpowerEl=document.getElementById("manpower");
const verdictBox=document.getElementById("verdictBox");

evaluate();
</script>

</body>
</html>
