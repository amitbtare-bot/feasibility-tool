<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Chemical Plant Scale & Economics Simulator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link rel="stylesheet" href="style.css">
</head>

<body>
body {
  margin: 0;
  font-family: "Segoe UI", Arial, sans-serif;
  background: linear-gradient(135deg,#1f2a44,#3b4f77);
  color: #fff;
}

header {
  text-align: center;
  padding: 40px 20px;
}

main {
  max-width: 1100px;
  margin: auto;
  background: #f4f6f8;
  color: #222;
  border-radius: 16px;
  padding: 40px;
  box-shadow: 0 25px 60px rgba(0,0,0,0.3);
}

.panel label {
  display: block;
  margin-top: 15px;
  font-weight: 600;
}

.panel input, .panel select {
  width: 100%;
  padding: 10px;
  margin-top: 5px;
}

.kpi {
  display: grid;
  grid-template-columns: repeat(auto-fit,minmax(200px,1fr));
  gap: 20px;
  margin: 30px 0;
}

.kpi div {
  background: #1f2a44;
  color: #fff;
  padding: 20px;
  border-radius: 12px;
  text-align: center;
}

.chart-box {
  background: #fff;
  padding: 20px;
  border-radius: 12px;
}

footer {
  text-align: center;
  padding: 20px;
  opacity: 0.8;
}

<header>
  <h1>Chemical Plant Scale & Economics</h1>
  <p>Select a chemical, modify parameters, visualize scale & economics impact</p>
</header>

<main>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Chemical Plant Scale & Economics Simulator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link rel="stylesheet" href="style.css">
</head>

<body>

<header>
  <h1>Chemical Plant Scale & Economics</h1>
  <p>Select a chemical, modify parameters, visualize scale & economics impact</p>
</header>

<main>

<section class="panel">
  <label>Chemical</label>
  <select id="chemical"></select>

  <label>Plant Capacity (TPA)</label>
  <input type="range" id="capacity" min="5000" max="100000" step="1000">
  <span id="capValue"></span>

  <label>Selling Price (₹/ton)</label>
  <input type="number" id="selling" value="90000">

  <label>Steam Cost (₹/ton)</label>
  <input type="number" id="steamCost" value="2500">

  <label>Power Cost (₹/kWh)</label>
  <input type="number" id="powerCost" value="7">
</section>

<section class="kpi">
  <div><h3>Manufacturing Cost</h3><p id="mfg">—</p></div>
  <div><h3>EBITDA Margin</h3><p id="ebitda">—</p></div>
  <div><h3>Estimated CAPEX</h3><p id="capex">—</p></div>
</section>

<section class="chart-box">
  <h2>Manufacturing Cost vs Plant Scale</h2>
  <canvas id="chart"></canvas>
</section>
/* ================= CHEMICAL DATABASE ================= */

const chemicals = [
  {
    id: 1,
    name: "Ethyl Acetate",
    rm: { ethanol: 0.53, acetic: 0.49 },
    rmPrice: { ethanol: 65000, acetic: 55000 },
    energy: { steam: 1.4, power: 100 },
    scale: { refCap: 30000, refCapex: 200, exp: 0.65 },
    fixedOpex: 12000
  },
  {
    id: 2,
    name: "Citric Acid",
    rm: { glucose: 1.2 },
    rmPrice: { glucose: 40000 },
    energy: { steam: 2.5, power: 150 },
    scale: { refCap: 20000, refCapex: 350, exp: 0.70 },
    fixedOpex: 18000
  }
];

/* ================= ELEMENTS ================= */

const chemicalSel = document.getElementById("chemical");
const capSlider = document.getElementById("capacity");
const capValue = document.getElementById("capValue");
const sellingInput = document.getElementById("selling");
const steamCostInput = document.getElementById("steamCost");
const powerCostInput = document.getElementById("powerCost");

/* ================= INIT ================= */

chemicals.forEach(c => {
  const opt = document.createElement("option");
  opt.value = c.id;
  opt.textContent = c.name;
  chemicalSel.appendChild(opt);
});

capSlider.value = 30000;

/* ================= CHART ================= */

const ctx = document.getElementById("chart");
const chart = new Chart(ctx, {
  type: "line",
  data: {
    labels: [],
    datasets: [{
      label: "Manufacturing Cost (₹/ton)",
      data: [],
      borderWidth: 3
    }]
  }
});

/* ================= CALCULATION ================= */

function calculate(c, cap) {

  let rmCost = 0;
  for (let k in c.rm) {
    rmCost += c.rm[k] * c.rmPrice[k];
  }

  const steamCost = c.energy.steam * +steamCostInput.value;
  const powerCost = c.energy.power * +powerCostInput.value;

  const fixed = c.fixedOpex * Math.pow(c.scale.refCap / cap, 0.3);

  const mfgCost = rmCost + steamCost + powerCost + fixed;

  const capex =
    c.scale.refCapex *
    Math.pow(cap / c.scale.refCap, c.scale.exp);

  const ebitda =
    ((+sellingInput.value - mfgCost) / +sellingInput.value) * 100;

  return { mfgCost, capex, ebitda };
}

/* ================= UPDATE ================= */

function update() {

  const c = chemicals.find(x => x.id == chemicalSel.value);
  const cap = +capSlider.value;

  capValue.textContent = cap.toLocaleString() + " TPA";

  const r = calculate(c, cap);

  document.getElementById("mfg").textContent =
    "₹ " + Math.round(r.mfgCost).toLocaleString();

  document.getElementById("capex").textContent =
    "₹ " + r.capex.toFixed(0) + " Cr";

  document.getElementById("ebitda").textContent =
    r.ebitda.toFixed(1) + " %";

  const xs = [], ys = [];
  for (let i = 5000; i <= 100000; i += 5000) {
    xs.push(i);
    ys.push(calculate(c, i).mfgCost);
  }

  chart.data.labels = xs;
  chart.data.datasets[0].data = ys;
  chart.update();
}

/* ================= EVENTS ================= */

document.querySelectorAll("input,select").forEach(e =>
  e.addEventListener("input", update)
);

update();


</main>

<footer>
Indicative techno-economic model • No vendor bias • Educational & planning use only
</footer>

<script src="app.js"></script>
</body>
</html>

<script src="app.js"></script>
</body>
</html>
